<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Freelancer Forum</title>
    <link rel="stylesheet" href="adadadad.css" />
  </head>
  <body>
    <h1>Freelancer Forum</h1>
    <p>The average starting price is $<span id="average">0</span></p>

    <h2>Available Freelancers</h2>
    <ul id="names"></ul>
    <ul id="occupations"></ul>
    <ul id="prices"></ul>

    <script>
      const freelancers = [
        { name: "Patricio", price: 35, occupation: "roofer" },
        { name: "Ganzo", price: 100, occupation: "gamer" },
        { name: "Impulse", price: 45, occupation: "pilot" },
        { name: "Prism", price: 80, occupation: "teacher" },
        { name: "Goose", price: 70, occupation: "electrician" },
        { name: "Possibility", price: 40, occupation: "teacher" },
        { name: "Slice", price: 25, occupation: "gardener" },
        { name: "Wire", price: 45, occupation: "carpenter" },
        { name: "Pressure", price: 50, occupation: "programmer" },
        { name: "Spark", price: 75, occupation: "dancer" },
      ];

      const actualFreelancers = [];

      function render() {
        const names = document.querySelector("#names");
        const occupations = document.querySelector("#occupations");
        const prices = document.querySelector("#prices");
        const average = document.querySelector("#average");

        // Clear previous lists
        names.innerHTML = "";
        occupations.innerHTML = "";
        prices.innerHTML = "";

        // Render freelancer names, occupations, and prices
        actualFreelancers.forEach((freelancer) => {
          const nameElement = document.createElement("li");
          nameElement.textContent = freelancer.name;
          names.appendChild(nameElement);

          const occupationElement = document.createElement("li");
          occupationElement.textContent = freelancer.occupation;
          occupations.appendChild(occupationElement);

          const priceElement = document.createElement("li");
          priceElement.textContent = freelancer.price;
          prices.appendChild(priceElement);
        });

        // Calculate average price
        const totalPrice = actualFreelancers.reduce(
          (sum, freelancer) => sum + freelancer.price,
          0
        );
        const averagePrice = actualFreelancers.length
          ? (totalPrice / actualFreelancers.length).toFixed(2)
          : 0;
        average.textContent = averagePrice;
      }

      function selectFreelancer() {
        // If we have added all freelancers, stop
        if (actualFreelancers.length >= freelancers.length) {
          clearInterval(addFreelancerIntervalId);
          return;
        }

        // Get a new random freelancer who hasn't been added yet
        const availableFreelancers = freelancers.filter(
          (freelancer) => !actualFreelancers.includes(freelancer)
        );
        const newFreelancer =
          availableFreelancers[
            Math.floor(Math.random() * availableFreelancers.length)
          ];

        actualFreelancers.push(newFreelancer); // Add to actual list
        render(); // Re-render
      }

      // Start adding freelancers every 5 seconds
      const addFreelancerIntervalId = setInterval(selectFreelancer, 5000);

      // Initial render (empty list)
      render();
    </script>
  </body>
</html>
